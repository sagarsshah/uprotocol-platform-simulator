= Eclipse up-Simulator
:toc:

== Introduction

The up-Simulator is a user-friendly web tool designed to make developing uProtocol services and Apps on PCs easy. Its intuitive interface empowers users with features such as Publish-Subscribe, RPC invocation, and the simulation of COVESA Vehicle Services. With a focus on a user-friendly graphical interface (GUI), users can easily navigate through the development and testing phases of uProtocol Apps, ensuring a smooth experience from start to finish.== Architecture Overview

up-Simulator:

Description: The up-Simulator operates as a web-based tool on PCs, establishing connections with any uPlatform supporting up-client (e.g., up-client-zenoh, up-client-someip, up-client-android).

Features:

Simulates COVESA services (COVESA mock Service): These services replicate real vehicle services on the PC, emulating the interface and behavior of actual services.

Mock Services:

Description: COVESA mock services mirror real COVESA vehicle services on the PC, replicating both interface and behavior.

Features:

Eliminates the need for real services: Developers can perform testing without requiring real hardware, enhancing the development environment.
Ensures consistent testing: Simulated services mirror real-world scenarios, providing reliable testing conditions.
Simulation Portal:

Description: The simulation portal offers a web-based user interface for initiating pub/sub and RPC transactions using mock services.

Features:

Allows developers to trigger and monitor transactions: Developers can efficiently manage transactions through an accessible and user-friendly interface.
Streamlines testing: The portal serves as a centralized control point, simplifying the testing of applications.
uLogging (Dashboard):

Description: The uLogging component captures all pub/sub and RPC transactions between mock services and apps/services under development.

Features:

Facilitates real-time monitoring and logging: Developers can monitor transactions in real-time, aiding in debugging and issue resolution.
Offers insights into communication between components: Provides valuable insights into the interactions between components, supporting the refinement of application behavior.
== How to Setup the Simulator

To set up the simulator, follow the steps below:

. Clone the code from the GitHub repository:
+
[source]
----
$ git clone https://github.com/eclipse-uprotocol/up-simulator.git
$ cd up-simulator
----

. Install the required dependencies using pip:
+
[source]
----
$ pip install -r requirements.txt
----

. Execute the `setup_simulator.py` script using the following command:
+
[source]
----
$ python setup_simulator.py
----

This script performs the following tasks:

* Clones the `covesa` protos, compiles it, and generates Python protofiles in the target folder.

* Iterates through all protofiles and generates a resource catalog in the target folder.

* Iterates through the protos again and generates a `services.json` file. This file is responsible for the UI of the simulator. At runtime, it parses the JSON to get a list of services, RPC, and messages and displays them in the UI.

Running this script will generate all the mandatory files needed by the simulator to function.


== How to Start and Use the uP Simulator

To start and use the `up-simulator`, follow the steps below:

. Execute the following command to start the simulator:
+
[source]
----
$ cd simulator
$ python run.py
----

. On the uP Simulator web interface, you will see a dropdown to select the uP client. Currently, it supports only Zenoh. Choose "Zenoh" from the dropdown.
+
image::screenshots/configuration.png[]

. Go to the configuration page on the uP Simulator interface and provide your Zenoh router's IP address and port in the respective fields on the configuration page.
+
image::screenshots/zenoh_config.png[]

. Provide your Zenoh router's IP address and port in the respective fields on the configuration page.

- **Zenoh Router IP:** [Your Zenoh Router IP]
- **Zenoh Router Port:** [Your Zenoh Router Port]

. Click on the "Save" button to save the Zenoh router configuration.
+
[NOTE]
Ensure that you have started the Zenoh router using the `zenohd` command before configuring the uP Simulator.

. To use the publish and subscribe functionality, click on the "Publish-Subscribe" menu. There, you will see a list of covesa services.
+
image::screenshots/pub-sub.png[]
. Select the service that you want to test subscribe or publish. You can either scroll down the list or use the search box to find your service.
+
image::screenshots/pub-sub-service.png[]

. Once you select the service, the simulator will show the list of all supported messages.

. Select the message for which you want to test subscribe and publish.
+
image::screenshots/pub-sub-resource.png[]

. Click on the "Subscribe" button to listen for the message data.
+
image::screenshots/subscribe.png[]

. Select the values you want to publish.

. Click on the "Publish" button to send the selected values.
+
image::screenshots/publish.png[]

. To test RPC, go to the mock service page and start the service for which you want to trigger an RPC request.
+
image::screenshots/covesa-services.png[]
image::screenshots/start-service.png[]

. To send an RPC request, select the "Remote Procedure Calls" menu. You will see a list of Covesa services. Choose the service you want to test.
+
image::screenshots/hello_world_service.png[]

. The list of available RPCs for the selected service will be displayed. Select the RPC you want to test.

. Provide your input and click on the "Send RPC" button.
+
image::screenshots/rpc-test.png[]

. You can now see the RPC request and response logs in the logs window.



== Additional Notes

- The script assumes that Python is installed on your system.
- The `requirements.txt` file contains a list of dependencies that will be installed using pip.
- The simulator is designed to be independent of the specific up client configuration during the setup phase.

Feel free to explore and contribute to the development of the `up-simulator`!

[NOTE]
This project is currently under development, and further enhancements and features are expected in future.



